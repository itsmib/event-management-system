<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"/>
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
        }

        .list-group-item {
            background-color: #1a1a1a;
            color: #ffffff;
            border: 1px solid #505fff;
        }

        .list-group-item:hover {
            background-color: #505fff;
            color: #ffffff;
        }

        .alert-success {
            background-color: #505fff;
            color: #ffffff;
        }

        .table-custom {
            background-color: #1a1a1a;
            color: #ffffff;
            border: 1px solid #505fff;
        }

        .table-custom th, .table-custom td {
            border: 1px solid #505fff;
        }

        .btn-danger {
            background-color: #505fff;
            border-color: #505fff;
        }

        .btn-secondary {
            background-color: #505fff;
            border-color: #505fff;
        }

        .btn-secondary:hover {
            background-color: #ffffff;
            color: #505fff;
        }

        .logo {
            width: 30px;
            height: 30px;
            margin-right: 10px;
        }

        .carousel-container {
            width: 60%;
            margin: auto;
        }

        .carousel-inner {
            display: flex; /* Ensure items are in a row */
        }

        .carousel-item {
            flex: 0 0 33.33%; /* Each item takes up 1/3 of the width */
            margin-right: 10px; /* Add some spacing between items */
            display: none; /* Initially hide all items */
        }

        .carousel-item:last-child {
            margin-right: 0; /* Remove margin from the last item */
        }

        .carousel-item.active,
        .carousel-item-next,
        .carousel-item-prev {
            display: block !important;
        }

        .carousel-item img {
            width: 100%;
            height: auto;
            object-fit: cover; /* Maintain aspect ratio */
        }

        .carousel-control-prev,
        .carousel-control-next {
            background: none;
            border: none;
            color: #ffffff;
            opacity: 0.5;
            transition: opacity 0.15s ease;
            width: 5%; /* Adjust width of controls */
        }

        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            opacity: 0.9;
        }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            padding: 10px;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".list-group-item").hover(function () {
                $(this).animate({
                    paddingLeft: '20px'
                }, 200);
            }, function () {
                $(this).animate({
                    paddingLeft: '10px'
                }, 200);
            });

            $('#eventCarousel').carousel({
                interval: 2000 // Optional: Auto-slide interval
            });

            function showThree() {
                var items = $('#eventCarousel .carousel-inner .carousel-item');
                items.each(function(index){
                    $(this).removeClass('active');
                    if (index >= 0 && index < 3) {
                        $(this).addClass('active');
                    }
                });
            }

            showThree(); // Initial display

            $('#eventCarousel').on('slide.bs.carousel', function (e) {
                var $e = $(e.relatedTarget);
                var idx = $e.index();
                var totalItems = $('#eventCarousel .carousel-inner .carousel-item').length;
                var slidesToShow = 3;
                var newIdx;

                if (e.direction === 'right') {
                    newIdx = (idx + slidesToShow) % totalItems;
                } else {
                    newIdx = (idx - slidesToShow + totalItems) % totalItems;
                }

                $('#eventCarousel .carousel-inner .carousel-item').removeClass('active');
                for (var i = 0; i < slidesToShow; i++) {
                    var targetIdx = (newIdx + i) % totalItems;
                    $('#eventCarousel .carousel-inner .carousel-item').eq(targetIdx).addClass('active');
                }
            });
        });
    </script>
</head>
<body>
<div class="container mt-4">
    <h2>
        <img src="https://cdn-icons-png.flaticon.com/512/666/666201.png"
             alt="Logo" class="logo"/> Welcome, <span th:text="${username}">User</span>
    </h2>
    <h4>User Dashboard</h4>
    <div class="list-group">
        <a href="/user/events" class="list-group-item list-group-item-action">View
            Upcoming Events</a>
        <a href="/user/bookings" class="list-group-item list-group-item-action">View My Bookings</a>
        <a href="/user/profile" class="list-group-item list-group-item-action">Edit Profile</a>
        <a href="#" class="list-group-item list-group-item-action text-danger"
           onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
            Logout
        </a>
    </div>
    <form id="logoutForm" th:action="@{/logout}" method="post"
          style="display: none;">
        <input type="hidden" th:name="${_csrf.parameterName}"
               th:value="${_csrf.token}"/>
    </form>
    <div class="alert alert-success mt-4">
        <strong>Reminder:</strong> You have an event coming up in 2 days.
    </div>
    <div class="carousel-container mt-4">
        <div id="eventCarousel" class="carousel slide"
             data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item">
                    <img src="/images/evangeline-shaw-nwLTVwb7DbU-unsplash.jpg"
                         class="d-block w-100" alt="Event 1">
                </div>
                <div class="carousel-item">
                    <img src="/images/noiseporn-JNuKyKXLh8U-unsplash.jpg"
                         class="d-block w-100" alt="Event 2">
                </div>
                <div class="carousel-item">
                    <img src="/images/pablo-heimplatz-ZODcBkEohk8-unsplash.jpg"
                         class="d-block w-100" alt="Event 3">
                </div>
                <div class="carousel-item">
                    <img src="/images/rachel-coyne-U7HLzMO4SIY-unsplash.jpg"
                         class="d-block w-100" alt="Event 4">
                </div>
                <div class="carousel-item">
                    <img src="/images/samantha-gades-fIHozNWfcvs-unsplash.jpg"
                         class="d-block w-100" alt="Event 5">
                </div>
                <!-- <div class="carousel-item">
                    <img src="/images/event1.jpg" class="d-block w-100"
                         alt="Event 6">
                </div>
                <div class="carousel-item">
                    <img src="/images/event2.jpg" class="d-block w-100"
                         alt="Event 7">
                </div>
                <div class="carousel-item">
                    <img src="/images/event3.jpg" class="d-block w-100"
                         alt="Event 8">
                </div>
                <div class="carousel-item">
                    <img src="/images/event4.jpg" class="d-block w-100"
                         alt="Event 9">
                </div> -->
            </div>
            <button class="carousel-control-prev" type="button"
                    data-bs-target="#eventCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button"
                    data-bs-target="#eventCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</div>
<footer class="mt-5 text-center">
    <p>&copy; 2025 Event Management System</p>
</footer>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>