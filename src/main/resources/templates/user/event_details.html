<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<meta charset="UTF-8">
<title th:text="${event.name}">Event Details</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet" />
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<style>
body {
	background-color: #000000;
	color: #ffffff;
}

.card {
	background-color: #1a1a1a;
	border: 1px solid #505fff;
}

.card-header {
	background-color: #505fff;
	color: #ffffff;
}

.btn-success {
	background-color: #505fff;
	border-color: #505fff;
}

.btn-outline-secondary {
	color: #505fff;
	border-color: #505fff;
}

.btn-outline-secondary:hover {
	background-color: #505fff;
	color: #ffffff;
}
</style>
</head>
<body>
	<div class="container my-5">
		<div class="card shadow-sm">
			<div class="card-header text-white">
				<h2 class="mb-0" th:text="${event.name}">Event Name</h2>
			</div>
			<div class="card-body">
				<div class="row mb-3">
					<div class="col-md-6">
						<p>
							<strong>Category:</strong> <span th:text="${event.category}">Category</span>
						</p>
						<p>
							<strong>Location:</strong> <span th:text="${event.location}">Location</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
							<strong>Date:</strong> <span
								th:text="${#temporals.format(event.eventDate, 'dd MMM yyyy')}">Date</span>
						</p>
						<p>
							<strong>Time:</strong> <span
								th:text="${#temporals.format(event.eventTime, 'hh:mm a')}">Time</span>
						</p>
					</div>
				</div>
				<hr />
				<div class="mb-4">
					<h5>Description</h5>
					<p th:text="${event.description}">Event description goes here.</p>
				</div>
				<form id="bookingForm"
					th:action="@{/user/book-event/{eventId}(eventId=${event.eventId})}"
					method="post">
					<button id="book-button" onClick="payNow()" type="button"
						class="btn btn-success btn-lg">Book This Event</button>
					<a href="/user/events"
						class="btn btn-outline-secondary btn-lg ms-2">Back to Events</a>
				</form>
			</div>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script th:inline="javascript">
		function payNow() {
			let eventName = /*[[${event.name}]]*/ "Default Event Name";
			let name = /*[[${user.name}]]*/ "Unknow user";
			let phoneNumber = /*[[${user.contactNumber}]]*/ "Unknow user";
			let email = /*[[${user.email}]]*/ "Unknow user";
			var options = {
				"key" : "rzp_test_a7byZxfSHiEoYm", // Replace with your Razorpay Key
				"amount" : "60000", // example amount in paise (â‚¹500)
				"currency" : "INR",
				"name" : eventName + " Booking",
				"description" : "Book event after payment",
				"handler" : function(response) {
					// On successful payment, proceed with form submission
					alert("Payment successful. ID: "
							+ response.razorpay_payment_id);
					// Now submit the form after payment
					document.getElementById("bookingForm").submit();
				},
				"prefill" : {
					"name" : "name",
					"email" : "email",
					"contact" : "phoneNumber"
				},
				"theme" : {
					"color" : "#0c5460"
				}
			};
			var rzp = new Razorpay(options);
			rzp.open();
		}
	</script>
</body>
</html>
